.panel.panel-default.index-section
  .panel-heading
    %strong= "AWRVI Index Summary"
  .panel-body
    %strong= "Completeness: #{index.completeness}"
    .progress
      .progress-bar{style: "width: #{index.completeness_percentage}%"}
    %strong= "AWRVI Vulnerability Index: #{number_with_precision(index.vulnerability_index, precision: 2)}"
    .row
      .col-xs-2
        .text-right.progress-bar-text More vulnerable
      .col-xs-8
        .progress
          - percentage = index.vulnerability_index * 100
          .progress-bar{style: "width: #{percentage}%", class: progress_bar_for_percentage(percentage)}
      .col-xs-2
        .text-left.progress-bar-text Less vulnerable
.row
  - index.awrvi_version.children.each do |subindex|
    .col-xs-6
      .panel.panel-default.index-section
        .panel-heading
          - subindex_value = indicator_value(index, subindex)
          %strong= "#{subindex}: #{number_with_precision(subindex_value, precision: 2)}"
        .panel-body
          - subindex.children.each do |indicator|
            - value = indicator_value(index, indicator)
            - percentage = value * 100
            %strong
              = "#{indicator.short_name.upcase}: #{number_with_precision(value, precision: 2)}"
            .row
              .col-xs-3
                .text-right.progress-bar-text More vulnerable
              .col-xs-6
                .progress
                  .progress-bar{style: "width: #{percentage}%;", class: progress_bar_for_percentage(percentage)}
              .col-xs-3
                .text-left.progress-bar-text Less vulnerable
